Updated 2024-07-31
# Resource Manager and Terraform
Terraform is an Infrastructure as Code (IaC) tool supported by Resource Manager for provisioning, configuring, and managing Oracle Cloud Infrastructure (OCI) resources.
For information about IaC tools supported by Resource Manager, see [Supported Infrastructure as Code Tools](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Concepts/iac-tools.htm#top "Resource Manager uses supported Infrastructure as Code \(IaC\) tools to help you provision, configure, and manage Oracle Cloud Infrastructure \(OCI\) resources.").
Each stack in Resource Manager is associated with a Terraform configuration and a Terraform state file. An understanding of [Hashicorp Terraform](https://developer.hashicorp.com/terraform) concepts is critical to manage resources successfully with Resource Manager.
## Terraform Configuration ðŸ”— 
Terraform configurations codify your infrastructure in declarative files that contain the steps required to provision your infrastructure and maintain its state. To manage OCI resources, the configuration must specify the `terraform-provider-oci`[Terraform provider](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Concepts/resourcemanager.htm#providers).
Resource Manager requires Terraform configurations to [create stacks](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Tasks/create-stack.htm#top "Create a stack in Resource Manager. You can optionally postpone variables and other stack settings until after the stack is created.") for provisioning and managing OCI resources. Pre-defined Terraform configurations are available as [templates](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Reference/templates.htm#top "Review the Oracle-provided templates available for Resource Manager. A template is a prebuilt Terraform configuration for deploying cloud resources in a common scenario."), and you can also generate Terraform configurations [from existing compartments](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Tasks/create-stack-compartment.htm#top "Using resource discovery, create a stack in Resource Manager based on an existing compartment to generate a Terraform configuration that describes the compartment's resources.") and [from resource creation pages (such as Create compute instance)](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Tasks/create-stack-resource.htm#top "Populate a resource creation page in another OCI service in the Console and then use the Save as stack button to create a stack in Resource Manager."). After the initial provisioning of your OCI resources, Resource Manager uses the stack's Terraform configuration to [detect drift](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Tasks/detect-drift.htm#top "Detect drift in a stack in Resource Manager. Drift is the difference between the actual, real-world state of your infrastructure and the stack's last executed configuration.") of resources (the difference between resource states and the configuration).
For a walkthrough that includes writing a sample Terraform configuration, see [Getting Started](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Concepts/samplecomputeinstance.htm#top "This sample provides an end-to-end walkthrough of the tasks required to create and deploy an Oracle Cloud Infrastructure compute instance using Resource Manager.").
For information about writing our own Terraform configurations, see [Terraform Configurations for Resource Manager](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Concepts/terraformconfigresourcemanager.htm#top "Review requirements and recommendations for Terraform configurations used with Resource Manager. Use Terraform and Resource Manager to install, configure, and manage resources using the infrastructure-as-code model.") and [Authoring Configurations](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Concepts/authoring-configurations.htm#top "Write a Terraform configuration to describe infrastructure using the HashiCorp Configuration Language format \(HCL\).").
## Terraform State ðŸ”— 
Terraform state files are automatically generated and updated by Resource Manager. Resource Manager stores Terraform state files for stacks so you don't have to. The stack's state file (.tfstate, in JSON format) maps your stack's resources to your configuration and maintains essential configuration metadata, such as resource dependencies.
Multiple people can work on a stack concurrently because stack state is locked, allowing only one job at a time to run on a given stack.
For related instructions, see:
  * [Getting a Stack's Terraform Configuration](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Tasks/get-stack-tf-config.htm#top "Download the Terraform configuration used by a stack in Resource Manager. The Terraform configuration file for a stack is the one associated with the most recent successful job.")
  * [Getting a Job's State File](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Tasks/get-job-tf-state.htm#top "Download the Terraform state file \(.json\) from a completed apply, apply rollback, or import job in Resource Manager.")
  * [Creating an Import Job](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Tasks/create-job-import.htm#top "Create an import job in Resource Manager to import state files for existing resources already managed by Terraform. An import job sets the provided Terraform state file as the current state of the stack.")


## Jobs ðŸ”— 
Resource Manager [jobs](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Concepts/resourcemanager.htm#concepts__jobdefinition) use Terraform configuration and state files to manage your Oracle Cloud Infrastructure (OCI) resources through the following Terraform actions.
  * **Plan** : Parses your Terraform configuration and creates an execution plan for the associated stack. The execution plan lists the sequence of specific actions planned to provision your OCI resources. The execution plan is handed off to the apply job, which then executes the instructions.
  * **Apply**. Applies the execution plan to the associated stack to create (or modify) your OCI resources. Depending on the number and type of resources specified, a given apply job can take some time. You can check status while the job runs.
  * **Destroy**. Releases resources associated with a stack. Released resources are not deleted. For example, terminates a Compute instance controlled by a stack. The stack's job history and state remain after running a destroy job. You can monitor the status and review the results of a destroy job by inspecting the stack's log files.
  * **Import State**. Sets the provided Terraform state file as the current state of the stack. Use this job to migrate local Terraform environments to Resource Manager.


When you [run a job](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Tasks/create-job.htm#top "Create a job in Resource Manager, such as plan, apply, or destroy."), the stack's variable values are added as environment variables in the Resource Manager Terraform host. For example, the VCN specified in a stack for a given VCN variable is added as an environment variable.
For a walkthrough that includes running jobs for the Terraform actions Plan, Apply, and Destroy, see [Getting Started](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Concepts/samplecomputeinstance.htm#top "This sample provides an end-to-end walkthrough of the tasks required to create and deploy an Oracle Cloud Infrastructure compute instance using Resource Manager.").
For instructions related to jobs for Terraform actions, see [Managing Jobs](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Tasks/jobs.htm#top "Manage jobs in Resource Manager.").
Was this article helpful?
YesNo

